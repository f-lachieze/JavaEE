<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/springsecurity6">
<head>
    <meta charset="UTF-8">
    <title>Réservation de Salle</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }

        /* Styles pour les messages */
        .message { font-weight: bold; margin-bottom: 15px; padding: 10px; border-radius: 4px; }
        .success { color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb; }
        .error { color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; }

        label { display: block; margin-top: 10px; font-weight: bold; }
        select, input[type="datetime-local"] { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { background-color: #28a745; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; width: 100%; margin-top: 20px; }
        button:hover { background-color: #1e7e34; }
    </style>
</head>


<body>
<div class="container">
    <h1>Réservation de Salle de Cours</h1>
    <a th:href="@{/}" style="display: block; margin-bottom: 20px;">
        ← Retour à l'accueil
    </a>

    <div th:if="${reservationStatus}"
         class="message success"
         style="color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb; padding: 10px; margin-bottom: 15px;">

        <span th:utext="${reservationStatus}">Statut de la réservation réussie.</span>

        <a th:href="@{/reservation/new}"
           class="action-link"
           style="background-color: #007bff; color: white; padding: 5px 10px; margin-left: 20px;">
            Faire une Nouvelle Réservation
        </a>
    </div>

    <div th:if="${errorMessage}"
         class="message error"
         style="color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; padding: 10px; margin-bottom: 15px;">
        Erreur: <span th:text="${errorMessage}">Détail de l'erreur.</span>
    </div>

    <form th:action="@{/reservation/save}" method="post">

        <label for="numSalle">Salle à Réserver (Capacité):</label>
        <select id="numSalle" name="numSalle" required>
            <option th:each="salle : ${allSalles}"
                    th:value="${salle.numSalle}"
                    th:text="${salle.numSalle} + ' (' + ${salle.batiment.codeB} + ' - Cap: ' + ${salle.capacite} + ')'"
                    th:selected="${salle.numSalle == selectedSalleId}"> Salle ID (Batiment - Capacité)
            </option>
        </select>

        <label for="usernameProf">Réservation pour (Utilisateur) :</label>
        <select id="usernameProf" name="usernameProf" required>
            <option th:each="user : ${allUsers}"
                    th:value="${user.username}"
                    th:text="${user.username} + ' (' + ${user.nom} + ')'">
                Nom Utilisateur
            </option>
        </select>

        <label for="dateHeureDebut">Date et Heure de Début:</label>
        <input type="datetime-local" id="dateHeureDebut" name="dateHeureDebut" required th:value="${dateHeureDebut}"/>

        <label for="dateHeureFin">Date et Heure de Fin:</label>
        <input type="datetime-local" id="dateHeureFin" name="dateHeureFin" required th:value="${dateHeureFin}"/>

        <button type="submit">Réserver la Salle</button>
    </form>
</div>
</body>
</html>